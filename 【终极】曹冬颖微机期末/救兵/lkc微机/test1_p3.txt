CODE	SEGMENT 'CODE'
	ASSUME CS:CODE
START:  MOV AL,90H   ;控制方式字不变
	MOV DX,0646H
	OUT DX,AL
APORT:  MOV DX,0640H
	IN  AL,DX	;读A端口
	AND AL,03H	;与运算判断K1K0是否为11
	CMP AL,03H
	JZ B1		;若K1K0是11
	MOV AH,AL
	AND AL,01H
	CMP AL,01H
	JZ B3
	AND AH,02H
	CMP AH,02H
	JZ B4
	MOV AL,0H
	JMP B2
B4:
    MOV AL,0F0H
    JMP B2
B3:
    MOV AL,0FH
    JMP B2
B1:    
    MOV AL,0FFH
B2:     MOV DX,0642H
	OUT DX,AL
	JMP APORT
	MOV AH,4CH  ;返回
	INT 21H
CODE    ENDS
END     START