CODE	SEGMENT 'CODE'
	ASSUME CS:CODE
START:  MOV AL,90H   ;控制方式字不变
	MOV DX,0646H
	OUT DX,AL
APORT:  MOV DX,0640H
	IN  AL,DX	;读A端口
	CMP AL,0FFH  ;比较K0~K7是否全为1
	JE BSTOP  ;若匹配，跳到BSTOP
BPORT:  MOV DX,0642H
	OUT DX,AL   ;送B端口
	JMP APORT
BSTOP:  MOV DX,0642H  ;使灯全灭
	MOV AL,0H
	OUT DX,AL
	MOV AH,4CH  ;返回
	INT 21H
CODE    ENDS
END     START