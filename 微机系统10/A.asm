A8255 EQU 0640H
B8255 EQU 0642H
C8255 EQU 0644H
CON8255 EQU 0646H

CT08254 EQU 0600H
CT18254 EQU 0602H
CT28254 EQU 0604H
CON8254 EQU 0606H

DATA SEGMENT
	
DATA ENDS
CODE SEGMENT
	ASSUME CS:CODE,DS:DATA
START:

	MOV DX,CON8254 
	MOV AL,76H 
	OUT DX,AL
	
	MOV DX,CT18254
	MOV AL,00H
	OUT DX,AL
	
	MOV AL,48H
	OUT DX,AL

	
	MOV AX,OFFSET DMIR6
	MOV SI,0038H
	MOV [SI],AX
	MOV AX,CS
	MOV SI,003AH
	MOV [SI],AX
	

	CLI
	MOV AL,11H
	OUT 20H,AL
	
	MOV AL,08H
	OUT 21H,AL
	
	MOV AL,04H
	OUT 21H,AL
	
	MOV AL,07H
	OUT 21H,AL
	
	MOV AL,2FH
	OUT 21H,AL
	STI
	
	MOV AX,DATA
	MOV DS,AX
	
	MOV AH,0FH
	
		
	MOV DX,CON8255
	MOV AL,10000000B
	OUT DX,AL
	

	
	
LP:
	NOP
	JMP LP
	
	
DMIR6:

	MOV DX,B8255
	MOV AL,AH
	NOT AH
	OUT DX,AL

	STI
	IRET


CODE ENDS
	END START