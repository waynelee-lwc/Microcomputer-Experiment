DATA SEGMENT
    SIGN DB 00H  
DATA ENDS
CODE SEGMENT
    ASSUME CS:CODE,DS:DATA
IOY0 EQU 0600H


START:
	
	MOV AX,OFFSET MIR6
    MOV SI,0038H
    MOV [SI],AX
    MOV AX,CS
    MOV SI,003AH
    MOV [SI],AX
    
    CLI 

    MOV AL, 11H     
    OUT 20H, AL
    MOV AL, 08H
    OUT 21H, AL
    MOV AL, 04H
    OUT 21H, AL
    MOV AL, 07H
    OUT 21H, AL
    MOV AL, 2FH
    OUT 21H, AL
    STI 
    
	MOV CX,0FFFFH	;TJC

MAIN:
	MOV CX,0FFFFH
	CMP SIGN,00H
	JE JUCHI
	CMP SIGN,01H
	JE JUXING
	CMP SIGN,02H
	JE SANJIAO
	CMP SIGN,03H
	JE JIETI
	JMP MAIN	
	
MIR6:
	INC SIGN
	CMP SIGN,04H
	JNE AA1
	MOV SIGN,00H
AA1:
	MOV CX,00H
	IRET
	
JUCHI:
	MOV DX,IOY0
	MOV AL,00H
JC1:
	OUT DX,AL
	CALL DELAY1
	CMP AL,0FFH
	JE JC2
	INC AL
	JMP JC1
JC2:
	;LOOP JUCHI
	JMP MAIN
	;MOV CX,05H		;TJX
JUXING:
	MOV DX,IOY0
	MOV AL,00H
	OUT DX,AL
	CALL DELAY2
	MOV	AL,0FFH
	OUT DX,AL
	CALL DELAY2
	;LOOP JUXING
	JMP MAIN
	
	;MOV CX,05H		;TSJ
	
SANJIAO:
	MOV AX,00H
SJ1:
	MOV DX,IOY0
	OUT DX,AL
	CALL DELAY1
	CMP AX,0FFH
	JE SJ2
	INC AL
	JMP SJ1
SJ2:
	MOV DX,IOY0
	OUT DX,AL
	CALL DELAY1
	CMP AL,00H
	JE SJ3
	DEC AL
	JMP SJ2
SJ3:
	;LOOP SANJIAO
	JMP MAIN
	;MOV CX,0FH		;TJT
JIETI:	
	MOV AX,0FEH
	MOV BL,07H		;count of stairs
	DIV BL
	MOV BL,AL
	MOV BH,00H

	MOV AX,0000H
JT1:
	MOV DX,IOY0
	OUT DX,AL
	CMP AX,00FFH
	JAE JT2
	CALL DELAY2
	ADD AX,BX
	JMP JT1
JT2:
	;LOOP JIETI
	JMP MAIN
	
DELAY1:
	PUSH CX
	MOV CX,01FFH
D1:
	PUSH AX
	POP AX
	LOOP D1
	POP CX
	RET	
DELAY2:
	PUSH CX
	MOV CX,0FFFFH
D2:
	PUSH AX
	POP AX
	LOOP D2
	POP CX
	RET 
CODE ENDS
END START